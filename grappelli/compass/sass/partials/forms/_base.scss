



/*  GRID DEPENDENT FIELD SIZES
------------------------------------------------------------------------------------------------------ */

@function formfield($n) {
    @return $blueprint-grid-width * $n + $blueprint-grid-margin * ($n - 1);
}
$n: $blueprint-grid-columns;
@while $n > 0 {
    .span-#{$n} input[type=text], 
    .span-#{$n} input[type=password], 
    .span-#{$n} select, 
    .span-#{$n} textarea, 
    input[type=text].span-#{$n}, 
    input[type=password].span-#{$n}, 
    select.span-#{$n}, 
    textarea.span-#{$n} {
        width: formfield($n);
    }
    $n: $n - 1;
}

@function formfield-contained($n) {
    @return $blueprint-grid-width * $n + $blueprint-grid-margin * ($n - 1) - 2;
}
$n: $blueprint-grid-columns;
@while $n > 0 {
    .span-#{$n} input[type=text].grp-form-field-contained, 
    .span-#{$n} input[type=password].grp-form-field-contained, 
    .span-#{$n} select.grp-form-field-contained, 
    .span-#{$n} textarea.grp-form-field-contained, 
    input[type=text].span-#{$n}.grp-form-field-contained, 
    input[type=password].span-#{$n}.grp-form-field-contained, 
    select.span-#{$n}.grp-form-field-contained, 
    textarea.span-#{$n}.grp-form-field-contained {
        width: formfield-contained($n);
    }
    $n: $n - 1;
}



/*  LABELS
------------------------------------------------------------------------------------------------------ */

@mixin grp-label {
    display: inline-block;
    font-family: $grp-form-label-font-family;
    font-size: $grp-form-label-font-size;
    line-height: $grp-form-label-line-height;
    color: $grp-form-label-font-color;
    &.required {
        @include grp-form-label-required;
    }
}
fieldset.grp-module {
    .grp-row label {
        margin: 6px 0 6px;
        @include grp-label;
    }
}


/*  FORM FIELDS
------------------------------------------------------------------------------------------------------ */

@mixin grp-form-field {
    margin: 0;
    @include grp-padding($grp-padding-size-xs $grp-padding-size-s);
    height: 25px;
    font-family: $grp-form-field-font-family;
    font-size: $grp-form-field-font-size;
    line-height: $grp-form-field-line-height;
    font-weight: bold;
    color: $grp-form-field-font-color;
    border: $grp-form-field-border;
    @include border-radius($grp-form-field-border-radius);
    background: $grp-form-field-background-color;
    @include box-sizing(border-box);
    @include grp-form-field-box-shadow;
    overflow: hidden;
    vertical-align: middle;
    &:focus, 
    &.grp-state-focus {
        border: $grp-form-field-border-focus;
        @include grp-form-field-box-shadow-focus;
        background: $grp-form-field-background-color-focus;
        outline: 0;
    }
}
input[type="text"], 
input[type="password"], 
input[type="submit"], 
input[type="reset"], 
textarea, 
select {
    @include grp-form-field;
    .grp-errors & {
        border-color: #bf3030;
    }
}
// fix vertical text-centering in webkit browsers
// @include grp-helper-webkit-inputâ€“text-verticalcenter;

.grp-errors {
    label {
        color: #bf3030 !important;
    }
    input[type="text"], 
    input[type="password"], 
    input[type="submit"], 
    input[type="reset"], 
    textarea, 
    select {
        border-color: #bf3030;
    }
    ul.errorlist {
        padding: 3px 0 0;
        color: #bf3030;
        font-size: 11px !important;
        line-height: 14px;
    }
}




/*  Select ................................................... */

select {
    padding: 4px 3px 4px 2px;
    // -moz-appearance: none; // not implemented in -moz yet, see https://bugzilla.mozilla.org/show_bug.cgi?id=649849
}
@media screen and (-webkit-min-device-pixel-ratio:0) {
    select {
        padding: 4px 28px 4px 5px;
        -webkit-appearance: textfield;
        background: #fff url('../img/icons/icon-form-select.png') 100% 50% no-repeat;
    }
}
select[multiple=multiple] {
    padding-right: 5px;
    height: 160px;
}
@media screen and (-webkit-min-device-pixel-ratio:0) {
    select[multiple=multiple] {
        background-image: none;
    }
}



/*  Textarea ................................................... */

textarea {
    vertical-align: top;
    padding: 5px 5px;
    height: 60px;
}
fieldset.monospace textarea {
    font-family: "Bitstream Vera Sans Mono",Monaco,"Courier New",Courier,monospace;
}




/*  Checkboxes, Radiobuttons ................................................... */

.grp-row input[type=checkbox] {
    position: relative;
    top: 1px;
    & + label {
        position: relative;
        margin: 0 0 0 5px;
    }
}



/*  SEARCH
------------------------------------------------------------------------------------------------------ */

input[type=text].grp-search-field {
    margin-right: -5px;
    padding-left: 10px;
    padding-right: 30px;
    @include border-radius(20px);
    & + button {
        // margin-left: 0;
    }
}


/*  BUTTONS (SUBMIT, RESET, CANCEL)
------------------------------------------------------------------------------------------------------ */

@mixin grp-form-button {
    height: 28px;
    @include border-radius($grp-form-button-border-radius !important);
    @media screen and (-webkit-min-device-pixel-ratio:0) {
        @include grp-padding($grp-padding-size-s $grp-padding-size);
    }
}
input[type="submit"] {
    @include grp-form-button;
    @include grp-form-button-default-gradient;
}
.grp-submit-row {
    > li {
        padding: 5px !important;
        @include border-radius($grp-form-button-border-radius + 2px);
        background: #444;
    }
    a.grp-delete-link {
        display: block;
        @include grp-form-field;
        @include grp-form-button;
        @include grp-form-button-delete-gradient;
        line-height: 16px;
    }
}




/*  ADD ANOTHER
------------------------------------------------------------------------------------------------------ */

a.add-another {
    display: block;
    width: 16px;
    height: 16px;
    @include icons-sprite(add-another);
}





/*  SELECTORS
------------------------------------------------------------------------------------------------------ */

.selector {
    position: relative;
    float: left;
    overflow: hidden;
    width: 758px;
    .selector-available, 
    .selector-chosen {
        float: left;
        width: 366px;
        border: 1px solid #ccc;
        @include border-radius($grp-border-radius);
        background: #ddd;
        &.stacked {
            width: 756px;
        }
        h2 {
            padding: 7px 5px 6px 7px;
            font-size: 12px;
            line-height: 13px;
            font-weight: bold;
        }
    }
    .selector-available {

    }
    ul.selector-chooser {
        float: left;
        margin: 110px 2px 0;
        padding: 0;
        width: 18px;
    }
    .selector-chosen {

    }
    .selector-filter {
        padding: 3px 5px 2px 2px;
        min-height: 25px;
        font-weight: bold;
        color: #666;
        border-top: 1px solid #e4e4e4;
        border-bottom: 1px solid #e4e4e4;
        @include border-top-radius($grp-border-radius);
        .selector-available & {
            line-height: 25px;
            text-indent: 25px;
                background: url('../img/icons/icon-searchbox.png') 6px 50% no-repeat;

        }
        .selector-chosen & {
            margin: 0 0 -3px;
            padding: 6px 5px 2px 26px;
            background: url('../img/icons/icon-searchbox.png') 6px 8px no-repeat;
            &:after {
                content: " " url('../img/icons/icon-selector_filter.png');
                opacity: .75;
            }
        }
        input[type=text] {
            position: relative;
            margin: 0;
            width: 326px !important;
            max-width: 326px !important;
        }
        img {
            display: none;
        }
        h2 + select {
            /*display: none;*/
            position: relative;
            top: -1px;
        }
    }
    select[multiple=multiple] {
        margin: 0;
        padding-left: 3px;
        max-width: 367px !important;
        width: 367px !important;
        height: 200px;
    }
    &.stacked {
        .selector-filter input[type=text] {
            width: 716px !important;
            max-width: 716px !important;
        }
        .selector-chosen .selector-filter:after {
            content: " " url('../img/icons/icon-selector_add-m2m_vertical-hover.png');
        }
        select[multiple=multiple] {
            width: 757px !important;
            max-width: 757px !important;
        }
        ul.selector-chooser {
            margin: 4px 0 0 356px;
            width: 36px;
            li {
                float: left;
            }
        }
    }
    a.selector-add, a.selector-remove {
        display: block;
        width: 18px;
        height: 18px;
        color: transparent !important;
        background-position: 50% 0;
        background-repeat: no-repeat;
    }
    a.selector-add:link, a.selector-add:visited {
        background-image: url('../img/icons/icon-selector_add-m2m_horizontal.png');
    }
    a.selector-add:hover, a.selector-add:active {
        background-image: url('../img/icons/icon-selector_add-m2m_horizontal-hover.png');
    }
    a.selector-remove:link, a.selector-remove:visited {
        background-image: url('../img/icons/icon-selector_remove-m2m_horizontal.png');
    }
    a.selector-remove:hover, a.selector-remove:active {
        background-image: url('../img/icons/icon-selector_remove-m2m_horizontal-hover.png');
    }
    .selector.stacked a.selector-add:link, .selector.stacked a.selector-add:visited {
        background-image: url('../img/icons/icon-selector_add-m2m_vertical.png');
    }
    .selector.stacked a.selector-add:hover, .selector.stacked a.selector-add:active {
        background-image: url('../img/icons/icon-selector_add-m2m_vertical-hover.png');
    }
    .selector.stacked a.selector-remove:link, .selector.stacked a.selector-remove:visited {
        background-image: url('../img/icons/icon-selector_remove-m2m_vertical.png');
    }
    .selector.stacked a.selector-remove:hover, .selector.stacked a.selector-remove:active {
        background-image: url('../img/icons/icon-selector_remove-m2m_vertical-hover.png');
    }
    a.selector-chooseall, a.selector-clearall {
        display: block;
        margin: 0;
        padding: 2px 7px;
        font-size: 11px;
        line-height: 13px;
        font-weight: bold;
    }
}



/*  Errors
------------------------------------------------------------------------------------------------------ */

p.errornote {
    color: #fff;
    font-weight: bold;
    margin: 0 0 $grp-margin-size-s;
    @include grp-padding($grp-padding-size-s $grp-padding-size);
    @include border-radius($grp-border-radius);
    background: #bf3030;
}
ul.errorlist {
    @include legacy-pie-clearfix;
    margin: 5px 0;
    font-size: 11px;
    line-height: 13px;
    font-weight: bold;
    color: #bf3030;
    
}
@mixin errorlist-nonform {
    margin: 5px 0 0;
    li {
        padding: 5px 10px;
        & + li {
            border-top: 1px solid #bf3030;
        }
    }
}
@mixin errorlist-field {
    margin: 2px 0 0;
    li {
        padding: 3px 0 0;
        border-top: 0 !important;
    }
}

/* little fix to accomodate the top aligned login form .. */
.grp-login .errornote, 
.errornote.grp-login-errors {
    margin-bottom: 0 !important;
    padding: 8px 10px 6px !important;
    @include border-radius(0);
}
.errornote.grp-login-errors {
    margin-bottom: 0 !important;
    padding: 8px 12px;
}

//  Errorlist in rows
.grp-row {
    ul.errorlist {
        @include errorlist-field;
    }
}

//  Errorlist in tabular groups
.grp-tabular {
    p.errornote {
        margin: 2px 0 0;
        & + ul.errorlist {
            margin: 0;
        }
    }
    ul.errorlist {
        @include errorlist-nonform;
    }
    .grp-td ul.errorlist {
        @include errorlist-field;
    }
}

//  Errorlist in cells
// .grp-cell ul.errorlist {
//     padding-left: 0;
// }
// .grp-cell ul.errorlist li {
//     padding-left: 0;
// }
// .grp-cell label + * + ul.errorlist, 
// .grp-cell label + * + * + ul.errorlist {
//     padding-left: 160px !important;
// }

//  Errorlist in stacked groups
.grp-stacked {
    ul.errorlist {
        @include errorlist-nonform;
    }
    h3 + * + ul.errorlist {
        @include errorlist-field;
        margin: 0 !important;
        padding: 5px 10px;
        border-bottom: 1px solid #ddd;
    }
    .grp-row ul.errorlist {
        @include errorlist-field;
    }
}

//  Errorlist in autocompletes
// .grp-autocomplete-wrapper-m2m {
//     ul.errorlist {
//         position: absolute;
//         top: 24px;
//     }
// }

// .errornote {
//     margin-bottom: 7px;
//     padding: 8px 10px;
//     font-size: 12px;
//     font-weight: bold;
// }
// /* little fix to accomodate the top aligned login form .. */
// .errornote.login-errors {
//     margin-bottom: 0 !important;
//     padding: 8px 12px;
// }
// ul.errorlist {
//     margin: 6px 0 -3px;
//     font-size: 11px;
//     line-height: 13px;
//     font-weight: bold;
// }
// ul.errorlist li {
//     padding: 0 5px 0 0;
// }
// p.errornote + ul.errorlist {
//     margin-bottom: 8px;
// }
// ul.errorlist:empty {
//     display: none;
//     margin: 0;
// }
// .group.tabular ul.errorlist {
//     margin-left: 11px;
// }
// .group.stacked ul.errorlist {
//     margin-left: 11px;
//     margin-bottom: 5px;
// }
// .group.stacked h3 + * + ul.errorlist {
//     margin: 0 !important;
//     padding: 5px 11px;
// }
// .cell ul.errorlist {
//     padding-left: 0;
// }
// .cell ul.errorlist li {
//     padding-left: 0;
// }
// .cell label + * + ul.errorlist, 
// .cell label + * + * + ul.errorlist {
//     padding-left: 160px !important;
// }
// table ul.errorlist {
//     margin: -9px 0 6px;
// }
// .group.stacked .row ul.errorlist, 
// .module.table ul.errorlist {
//     margin-top: 5px;
//     margin-left: 0;
//     margin-bottom: -3px;
// }
// ul.radiolist.inline + ul.errorlist, 
// ul.radiolist.inline + * + ul.errorlist {
//     position: relative; clear: both;
// }
// ul.radiolist + ul.errorlist, 
// ul.radiolist + * + ul.errorlist {
//     margin-top: 0 !important;
// }

// .module.table .tbody>ul.errorlist {
//     margin-top: 2px;
//     margin-left: 11px;
//     margin-bottom: 2px;
// }
// .module.table .tr ul.errorlist {
//     margin-left: 0;
// }
// .module.table ul.radiolist + ul.errorlist, 
// .module.table ul.radiolist + * + ul.errorlist {
//     margin: -2px 0 0;
// }
// table ul.errorlist li, 
// .module.table ul.errorlist li {
//     padding-left: 0;
// }
// p.errornote + ul.errorlist li {
//     padding-left: 10px;
// }



/*  Form Elements: Basic Widths & Heights
------------------------------------------------------------------------------------------------------ */

input[type=text], 
input[type=password], 
.vDateField, 
.vTimeField, 
.vIntegerField, 
.vPositiveSmallIntegerField, 
.vManyToManyRawIdAdminField, 
.vForeignKeyRawIdAdminField {
    width: 118px;
}

input.vTextField, 
input.vURLField, 
input.vFileBrowseField, 
textarea, 
.vLargeTextField, 
.vXMLLargeTextField {
    width: 278px;
}

.row select {
    min-width: 118px;
}

.vLargeTextField {
    height: 118px;
}


// *:focus {
//     @include single-box-shadow(#e4f, 0, 0, 5px, 5px);
// }




